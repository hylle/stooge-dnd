{"ast":null,"code":"import _classCallCheck from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jh/www/projects/stooge-dnd/src/containers/initiative/index.js\";\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Switch, Route } from 'react-router';\nimport { connect } from 'react-redux'; // import forEach from 'lodash/forEach';\n// import { Link } from 'react-router-dom';\n\nimport MonsterStats from '../../components/monsterstats';\nimport SortableList from '../../components/list'; // import IconMinotaur from './minotaur.svg';\n// import IconSwordman from './swordman.svg';\n\nimport IconRoll from \"./roll.svg\";\nimport IconStepNext from \"./step-next.svg\";\nimport IconStepPrev from \"./step-prev.svg\";\nimport './initiative.scss';\nimport SidebarLayout from '../../components/sidebarLayout';\nimport { INITIATIVE_MOVE, INITIATIVE_INIT_ROLL, INITIATIVE_STEP_FORWARD, INITIATIVE_STEP_BACK } from '../../reducers/initiative';\nimport SidebarActions from '../../components/sidebarActions';\nimport HPGauge from './hpGauge';\nvar Extra = connect(function (state) {\n  return {\n    currentActor: state.initiative.currentActor\n  };\n})(function (_ref) {\n  var item = _ref.item;\n  return React.createElement(React.Fragment, null, React.createElement(HPGauge, {\n    item: item,\n    id: item.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }));\n});\n\nvar InitiativeTracker =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(InitiativeTracker, _Component);\n\n  function InitiativeTracker() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, InitiativeTracker);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(InitiativeTracker)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onSortEnd = function (_ref2) {\n      var oldIndex = _ref2.oldIndex,\n          newIndex = _ref2.newIndex;\n      var dispatch = _this.props.dispatch;\n      dispatch({\n        type: INITIATIVE_MOVE,\n        oldIndex: oldIndex,\n        newIndex: newIndex\n      });\n    };\n\n    _this.rollInitiative = function () {\n      var _this$props = _this.props,\n          dispatch = _this$props.dispatch,\n          actors = _this$props.actors;\n      dispatch({\n        type: INITIATIVE_INIT_ROLL,\n        actors: actors\n      });\n    };\n\n    _this.stepForwardInitiative = function () {\n      var dispatch = _this.props.dispatch;\n      dispatch({\n        type: INITIATIVE_STEP_FORWARD\n      });\n    };\n\n    _this.stepBackInitiative = function () {\n      var dispatch = _this.props.dispatch;\n      dispatch({\n        type: INITIATIVE_STEP_BACK\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(InitiativeTracker, [{\n    key: \"render\",\n    value: function render() {\n      var actors = this.props.actors;\n      return React.createElement(SidebarLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(SidebarActions, {\n        buttons: [{\n          key: 'roll-initiative',\n          onClick: this.rollInitiative,\n          glyph: IconRoll,\n          title: 'Input initiative'\n        }, {\n          key: 'step-next',\n          onClick: this.stepForwardInitiative,\n          glyph: IconStepNext,\n          title: 'Next initiative'\n        }, {\n          key: 'step-prev',\n          onClick: this.stepBackInitiative,\n          glyph: IconStepPrev,\n          title: 'Next initiative'\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }), React.createElement(SortableList, {\n        items: actors,\n        onSortEnd: this.onSortEnd,\n        linkGen: function linkGen(item) {\n          return item.stats ? \"/initiative/monster/\".concat(item.id) : \"/initiative/player/\".concat(item.id);\n        },\n        extraComponent: Extra,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      })), React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/initiative/monster/:id\",\n        component: MonsterStats,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/initiative/player/:id\",\n        component: function component() {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          }, \"Nothing to see here\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return InitiativeTracker;\n}(Component);\n\nInitiativeTracker.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  actors: PropTypes.arrayOf(PropTypes.shape({})).isRequired\n};\nexport default connect(function (state) {\n  return {\n    dispatch: state.dispatch,\n    actors: state.initiative.actors\n  };\n})(InitiativeTracker);","map":{"version":3,"sources":["/Users/jh/www/projects/stooge-dnd/src/containers/initiative/index.js"],"names":["React","Component","Fragment","PropTypes","Switch","Route","connect","MonsterStats","SortableList","SidebarLayout","INITIATIVE_MOVE","INITIATIVE_INIT_ROLL","INITIATIVE_STEP_FORWARD","INITIATIVE_STEP_BACK","SidebarActions","HPGauge","Extra","state","currentActor","initiative","item","id","InitiativeTracker","onSortEnd","oldIndex","newIndex","dispatch","props","type","rollInitiative","actors","stepForwardInitiative","stepBackInitiative","key","onClick","glyph","IconRoll","title","IconStepNext","IconStepPrev","stats","propTypes","func","isRequired","arrayOf","shape"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Switch, Route } from 'react-router';\nimport { connect } from 'react-redux';\n// import forEach from 'lodash/forEach';\n// import { Link } from 'react-router-dom';\nimport MonsterStats from '../../components/monsterstats';\nimport SortableList from '../../components/list';\n\n// import IconMinotaur from './minotaur.svg';\n// import IconSwordman from './swordman.svg';\nimport IconRoll from './roll.svg';\nimport IconStepNext from './step-next.svg';\nimport IconStepPrev from './step-prev.svg';\n\nimport './initiative.scss';\nimport SidebarLayout from '../../components/sidebarLayout';\nimport {\n\tINITIATIVE_MOVE,\n\tINITIATIVE_INIT_ROLL,\n\tINITIATIVE_STEP_FORWARD,\n\tINITIATIVE_STEP_BACK,\n} from '../../reducers/initiative';\nimport SidebarActions from '../../components/sidebarActions';\nimport HPGauge from './hpGauge';\n\nconst Extra = connect((state) => ({\n\tcurrentActor: state.initiative.currentActor,\n}))(({ item }) => {\n\treturn (\n\t\t<>\n\t\t\t<HPGauge item={item} id={item.id} />\n\t\t</>\n\t);\n});\n\nclass InitiativeTracker extends Component {\n\tstatic propTypes = {\n\t\tdispatch: PropTypes.func.isRequired,\n\t\tactors: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n\t};\n\n\trender() {\n\t\tconst { actors } = this.props;\n\t\treturn (\n\t\t\t<SidebarLayout>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<SidebarActions\n\t\t\t\t\t\tbuttons={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'roll-initiative',\n\t\t\t\t\t\t\t\tonClick: this.rollInitiative,\n\t\t\t\t\t\t\t\tglyph: IconRoll,\n\t\t\t\t\t\t\t\ttitle: 'Input initiative',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'step-next',\n\t\t\t\t\t\t\t\tonClick: this.stepForwardInitiative,\n\t\t\t\t\t\t\t\tglyph: IconStepNext,\n\t\t\t\t\t\t\t\ttitle: 'Next initiative',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'step-prev',\n\t\t\t\t\t\t\t\tonClick: this.stepBackInitiative,\n\t\t\t\t\t\t\t\tglyph: IconStepPrev,\n\t\t\t\t\t\t\t\ttitle: 'Next initiative',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={actors}\n\t\t\t\t\t\tonSortEnd={this.onSortEnd}\n\t\t\t\t\t\tlinkGen={(item) => (item.stats\n\t\t\t\t\t\t\t? `/initiative/monster/${item.id}`\n\t\t\t\t\t\t\t: `/initiative/player/${item.id}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t\textraComponent={Extra}\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/initiative/monster/:id\" component={MonsterStats} />\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tpath=\"/initiative/player/:id\"\n\t\t\t\t\t\t\tcomponent={() => <div>Nothing to see here</div>}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Switch>\n\t\t\t\t</Fragment>\n\t\t\t</SidebarLayout>\n\t\t);\n\t}\n\n\tonSortEnd = ({ oldIndex, newIndex }) => {\n\t\tconst { dispatch } = this.props;\n\t\tdispatch({\n\t\t\ttype: INITIATIVE_MOVE,\n\t\t\toldIndex,\n\t\t\tnewIndex,\n\t\t});\n\t};\n\n\trollInitiative = () => {\n\t\tconst { dispatch, actors } = this.props;\n\n\t\tdispatch({\n\t\t\ttype: INITIATIVE_INIT_ROLL,\n\t\t\tactors,\n\t\t});\n\t};\n\n\tstepForwardInitiative = () => {\n\t\tconst { dispatch } = this.props;\n\n\t\tdispatch({\n\t\t\ttype: INITIATIVE_STEP_FORWARD,\n\t\t});\n\t};\n\n\tstepBackInitiative = () => {\n\t\tconst { dispatch } = this.props;\n\n\t\tdispatch({\n\t\t\ttype: INITIATIVE_STEP_BACK,\n\t\t});\n\t};\n}\n\nexport default connect((state) => ({\n\tdispatch: state.dispatch,\n\tactors: state.initiative.actors,\n}))(InitiativeTracker);\n"]},"metadata":{},"sourceType":"module"}