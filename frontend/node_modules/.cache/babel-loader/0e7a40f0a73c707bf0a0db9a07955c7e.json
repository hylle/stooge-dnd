{"ast":null,"code":"import _classCallCheck from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jh/www/projects/stooge-dnd/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jh/www/projects/stooge-dnd/src/containers/initiative/index.js\";\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Switch, Route } from 'react-router';\nimport { connect } from 'react-redux'; // import forEach from 'lodash/forEach';\n// import { Link } from 'react-router-dom';\n\nimport MonsterStats from '../../components/monsterstats';\nimport SortableList from '../../components/list'; // import IconMinotaur from './minotaur.svg';\n// import IconSwordman from './swordman.svg';\n\nimport IconRoll from \"./roll.svg\";\nimport IconStepNext from \"./step-next.svg\";\nimport './initiative.scss';\nimport SidebarLayout from '../../components/sidebarLayout';\nimport { INITIATIVE_MOVE, INITIATIVE_INIT_ROLL, INITIATIVE_STEP_FORWARD } from '../../reducers/initiative';\nimport SidebarActions from '../../components/sidebarActions';\nimport HPGauge from './hpGauge';\n\nvar InitiativeTracker =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(InitiativeTracker, _Component);\n\n  function InitiativeTracker() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, InitiativeTracker);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(InitiativeTracker)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onSortEnd = function (_ref) {\n      var oldIndex = _ref.oldIndex,\n          newIndex = _ref.newIndex;\n      var dispatch = _this.props.dispatch;\n      dispatch({\n        type: INITIATIVE_MOVE,\n        oldIndex: oldIndex,\n        newIndex: newIndex\n      });\n    };\n\n    _this.rollInitiative = function () {\n      var _this$props = _this.props,\n          dispatch = _this$props.dispatch,\n          actors = _this$props.actors;\n      dispatch({\n        type: INITIATIVE_INIT_ROLL,\n        actors: actors\n      });\n    };\n\n    _this.nextInitiative = function () {\n      var dispatch = _this.props.dispatch;\n      dispatch({\n        type: INITIATIVE_STEP_FORWARD\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(InitiativeTracker, [{\n    key: \"render\",\n    value: function render() {\n      var actors = this.props.actors;\n      return React.createElement(SidebarLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, React.createElement(SidebarActions, {\n        buttons: [{\n          key: 'roll-initiative',\n          onClick: this.rollInitiative,\n          glyph: IconRoll,\n          title: 'Input initiative'\n        }, {\n          key: 'step-next',\n          onClick: this.rollInitiative,\n          glyph: IconStepNext,\n          title: 'Next initiative'\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }), React.createElement(SortableList, {\n        items: actors,\n        onSortEnd: this.onSortEnd,\n        linkGen: function linkGen(item) {\n          return item.stats ? \"/initiative/monster/\".concat(item.id) : \"/initiative/player/\".concat(item.id);\n        },\n        extraComponent: HPGauge,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      })), React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/initiative/monster/:id\",\n        component: MonsterStats,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/initiative/player/:id\",\n        component: function component() {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            },\n            __self: this\n          }, \"Nothing to see here\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return InitiativeTracker;\n}(Component);\n\nInitiativeTracker.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  actors: PropTypes.arrayOf(PropTypes.shape({})).isRequired\n};\nexport default connect(function (state) {\n  return {\n    dispatch: state.dispatch,\n    actors: state.initiative.actors\n  };\n})(InitiativeTracker);","map":{"version":3,"sources":["/Users/jh/www/projects/stooge-dnd/src/containers/initiative/index.js"],"names":["React","Component","Fragment","PropTypes","Switch","Route","connect","MonsterStats","SortableList","SidebarLayout","INITIATIVE_MOVE","INITIATIVE_INIT_ROLL","INITIATIVE_STEP_FORWARD","SidebarActions","HPGauge","InitiativeTracker","onSortEnd","oldIndex","newIndex","dispatch","props","type","rollInitiative","actors","nextInitiative","key","onClick","glyph","IconRoll","title","IconStepNext","item","stats","id","propTypes","func","isRequired","arrayOf","shape","state","initiative"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Switch, Route } from 'react-router';\nimport { connect } from 'react-redux';\n// import forEach from 'lodash/forEach';\n// import { Link } from 'react-router-dom';\nimport MonsterStats from '../../components/monsterstats';\nimport SortableList from '../../components/list';\n\n// import IconMinotaur from './minotaur.svg';\n// import IconSwordman from './swordman.svg';\nimport IconRoll from './roll.svg';\nimport IconStepNext from './step-next.svg';\n\nimport './initiative.scss';\nimport SidebarLayout from '../../components/sidebarLayout';\nimport {\n\tINITIATIVE_MOVE,\n\tINITIATIVE_INIT_ROLL,\n\tINITIATIVE_STEP_FORWARD,\n} from '../../reducers/initiative';\nimport SidebarActions from '../../components/sidebarActions';\nimport HPGauge from './hpGauge';\n\nclass InitiativeTracker extends Component {\n\tstatic propTypes = {\n\t\tdispatch: PropTypes.func.isRequired,\n\t\tactors: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n\t};\n\n\trender() {\n\t\tconst { actors } = this.props;\n\t\treturn (\n\t\t\t<SidebarLayout>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<SidebarActions\n\t\t\t\t\t\tbuttons={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'roll-initiative',\n\t\t\t\t\t\t\t\tonClick: this.rollInitiative,\n\t\t\t\t\t\t\t\tglyph: IconRoll,\n\t\t\t\t\t\t\t\ttitle: 'Input initiative',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'step-next',\n\t\t\t\t\t\t\t\tonClick: this.rollInitiative,\n\t\t\t\t\t\t\t\tglyph: IconStepNext,\n\t\t\t\t\t\t\t\ttitle: 'Next initiative',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={actors}\n\t\t\t\t\t\tonSortEnd={this.onSortEnd}\n\t\t\t\t\t\tlinkGen={(item) => (item.stats\n\t\t\t\t\t\t\t? `/initiative/monster/${item.id}`\n\t\t\t\t\t\t\t: `/initiative/player/${item.id}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t\textraComponent={HPGauge}\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/initiative/monster/:id\" component={MonsterStats} />\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tpath=\"/initiative/player/:id\"\n\t\t\t\t\t\t\tcomponent={() => <div>Nothing to see here</div>}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Switch>\n\t\t\t\t</Fragment>\n\t\t\t</SidebarLayout>\n\t\t);\n\t}\n\n\tonSortEnd = ({ oldIndex, newIndex }) => {\n\t\tconst { dispatch } = this.props;\n\t\tdispatch({\n\t\t\ttype: INITIATIVE_MOVE,\n\t\t\toldIndex,\n\t\t\tnewIndex,\n\t\t});\n\t};\n\n\trollInitiative = () => {\n\t\tconst { dispatch, actors } = this.props;\n\n\t\tdispatch({\n\t\t\ttype: INITIATIVE_INIT_ROLL,\n\t\t\tactors,\n\t\t});\n\t};\n\n\tnextInitiative = () => {\n\t\tconst { dispatch } = this.props;\n\n\t\tdispatch({\n\t\t\ttype: INITIATIVE_STEP_FORWARD,\n\t\t});\n\t};\n}\n\nexport default connect((state) => ({\n\tdispatch: state.dispatch,\n\tactors: state.initiative.actors,\n}))(InitiativeTracker);\n"]},"metadata":{},"sourceType":"module"}