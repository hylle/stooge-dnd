{"version":3,"sources":["components/monsterstats/damage.svg","components/monsterstats/heal.svg","containers/initiative/roll.svg","svg/add.svg","svg/lightning.svg","containers/party/swordman.svg","svg/remove.svg","containers/app/initiative.svg","containers/app/monster.svg","containers/app/sword-clash.svg","containers/app/party.svg","utils/persistState.js","utils/arrayMove.js","reducers/players.js","reducers/monsters.js","utils/affixes.js","reducers/initiative.js","reducers/index.js","actions.js","utils/statModifiers.js","utils/dieRoll.js","sagas/initiative.js","sagas/index.js","store.js","components/monsterstats/index.js","utils/colorFromName.js","components/optionalLink/index.js","components/list/index.js","components/sidebarLayout/index.js","components/sidebarActions/index.js","containers/initiative/hpGauge.js","containers/initiative/index.js","containers/monsters/encounterList.js","containers/monsters/index.js","containers/encounter/index.js","containers/party/index.js","containers/app/index.js","index.js"],"names":["module","exports","__webpack_require__","p","getInitialStateFromStorage","defaultState","storageKey","storageVersion","storage","JSON","parse","window","localStorage","getItem","initialState","Object","objectSpread","createPersistStateFunction","state","setItem","stringify","arrayMove","arr","previousIndex","newIndex","array","slice","length","k","push","undefined","splice","TYPE_PLAYER","PLAYERS_ADD","PLAYERS_REMOVE","PLAYERS_MOVE","items","persistState","TYPE_MONSTER","MONSTERS_ADD","encounters","customMonsters","selectedEncounter","enhanceMonster","monster","id","shortid","generate","name","type","stats","usedAffixes","affixes","INITIATIVE_MOVE","INITIATIVE_ADD","INITIATIVE_REMOVE","INITIATIVE_TRANSFER_ENCOUNTER","INITIATIVE_INIT_ROLL","INITIATIVE_CLEAR_MONSTERS","INITIATIVE_SET_INITIATIVE","actors","addActor","actor","enhancedActor","find","affix","sample","without","apply","concat","toConsumableArray","getAffix","sortBy","reverse","clearMonsters","newState","actorsWithoutMonster","filter","takeDamage","damage","actorIndex","indexOf","damagedActor","currentHP","combineReducers","players","arguments","action","player","addPlayer","removePlayer","oldIndex","movePlayers","monsters","encounterId","encounterIndex","findIndex","newEncounters","addMonster","hit_dice","customStatLink","produce","draft","addCustomMonster","monsterId","newMonsters","mob","removeMonster","addEncounter","encounter","removeEncounter","initiative","stateActor","removeActor","moveActors","newActors","setActorInitiative","Math","abs","heal","healDamage","ADD_ACTOR","REMOVE_ACTOR","calcModifier","stat","floor","prettyModifier","modifier","dieRoll","dieNotation","dieModifier","match","exec","Error","howMany","parseInt","dieSize","rollSum","rollCount","random","hitDieRoll","constitution","hitDieModifier","watchTransferMonsters","watchAddActor","watchRemoveActor","watchRollInitiative","watchInitiative","_ref","index","regenerator_default","a","wrap","_context","prev","next","take","sent","put","stop","_marked","this","getInitiativeForActor","dexterity","getHPforActor","_ref2","maxHP","_context2","_marked2","_ref3","_actor","_context3","_marked3","_ref4","_actor2","_context4","prompt","isNaN","_marked4","_context5","all","fork","_marked5","rootSaga","sagas_marked","history","createHistory","sagaMiddleware","createSagaMiddleware","middleware","routerMiddleware","composedEnhancers","compose","applyMiddleware","store","createStore","connectRouter","rootReducer","run","CR_TO_XP_TABLE","0","0.125","0.25","0.5","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","SKILLS","SKILLS_NAMES","PLAIN_VALUE_FORMATTER","value","joinStats","title","data","names","formatter","joinedStats","reduce","curr","join","react_default","createElement","keyToNameFormatter","key","spacedStr","replace","charAt","toUpperCase","MonsterStats","dispatch","className","onClick","src","IconDamage","alt","IconHeal","Fragment","sandbox","size","subtype","alignment","armor_class","hit_points","speed","width","map","ability","cr","xp","CR2XP","section","react","i","desc","defaultProps","connect","props","params","colors","blue","main","complement","red","green","gold","silver","black","brown","zombie","goblin","unicorn","gradient","blood","copper","bronze","brass","getColorsFromName","lcName","toLowerCase","colorNames","keys","colorName","styleObj","OptionalNavLink","to","NavLink","assign","SortableItem","SortableElement","item","actions","linkGen","ExtraComponent","extraComponent","colorStyles","style","borderImage","borderBottomColor","colorToStyle","optionalLink","classnames","trackerlist-item__link__name","trackerlist-item__link__name--monster","trackerlist-item__link__name--player","glyph","height","SortableList","SortableContainer","disableDragging","disabled","lockAxis","distance","helperClass","SidebarLayout","children","SidebarActions","buttons","button","HPGauge","currentActor","InitiativeTracker","onSortEnd","_this","rollInitiative","_this$props","components_sidebarLayout","components_sidebarActions","IconRoll","components_list","Switch","Route","path","component","Component","selectEncounter","newSelectedEncounter","MonsterItem","EncounterList","encounter-list__encounter","encounter-list__encounter--selected","onKeyDown","e","keyCode","role","tabIndex","stopPropagation","transferMonsters","encounterList_MonsterItem","MonsterEncounters","addCustomEncounter","encounterList_EncounterList","MonsterLookup","search","filterMonsters","_this$state","console","log","filteredMonsters","onInput","setState","target","createMonsterAddPlayerAction","monsterData","addMonsterToEncounter","quickAddMonsterToInitiative","_this2","then","t","bind","default","_this$props$monsters","hasSelectedEncounter","IconLightning","IconAdd","autoComplete","placeholder","listName","monsters_encounterList","EncounterGenerator","PartyManager","addPlayers","namesStr","playerNames","split","createPlayerObject","trim","forEach","confirm","IconSwordman","IconRemove","App","HashRouter","Link","IconInitiative","IconParty","IconMonster","IconClash","Redirect","from","exact","document","querySelector","render","es","lib","containers_app"],"mappings":"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","file":"static/js/main.dced8b18.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/damage.f6442147.svg\";","module.exports = __webpack_public_path__ + \"static/media/heal.b8b5a404.svg\";","module.exports = __webpack_public_path__ + \"static/media/roll.7417789e.svg\";","module.exports = __webpack_public_path__ + \"static/media/add.56287acd.svg\";","module.exports = __webpack_public_path__ + \"static/media/lightning.1ce3a3a0.svg\";","module.exports = __webpack_public_path__ + \"static/media/swordman.b97243d4.svg\";","module.exports = __webpack_public_path__ + \"static/media/remove.fdf22623.svg\";","module.exports = __webpack_public_path__ + \"static/media/initiative.edd3f08c.svg\";","module.exports = __webpack_public_path__ + \"static/media/monster.122b3d09.svg\";","module.exports = __webpack_public_path__ + \"static/media/sword-clash.184d3483.svg\";","module.exports = __webpack_public_path__ + \"static/media/party.f0c05216.svg\";","const getInitialStateFromStorage = (\n\tdefaultState,\n\tstorageKey,\n\tstorageVersion,\n) => {\n\tconst storage = JSON.parse(window.localStorage.getItem(storageKey));\n\tconst initialState = {\n\t\t...defaultState,\n\t\tstorageVersion,\n\t};\n\n\treturn storage && storage.storageVersion === storageVersion\n\t\t? storage\n\t\t: initialState;\n};\n\nconst createPersistStateFunction = (storageKey) => (state) => {\n\twindow.localStorage.setItem(storageKey, JSON.stringify(state));\n\n\treturn state;\n};\n\nexport default createPersistStateFunction;\n\nexport { getInitialStateFromStorage };\n","const arrayMove = (arr, previousIndex, newIndex) => {\n\tconst array = arr.slice(0);\n\tif (newIndex >= array.length) {\n\t\tlet k = newIndex - array.length;\n\t\t// eslint-disable-next-line no-plusplus\n\t\twhile (k-- + 1) {\n\t\t\tarray.push(undefined);\n\t\t}\n\t}\n\tarray.splice(newIndex, 0, array.splice(previousIndex, 1)[0]);\n\treturn array;\n};\n\nexport default arrayMove;\n","import without from 'lodash/without';\nimport createPersistStateFunction, {\n\tgetInitialStateFromStorage,\n} from '../utils/persistState';\nimport arrayMove from '../utils/arrayMove';\n\nexport const TYPE_PLAYER = 'players/TYPE_PLAYER';\nexport const PLAYERS_ADD = 'players/PLAYERS_ADD';\nexport const PLAYERS_REMOVE = 'players/PLAYERS_REMOVE';\nexport const PLAYERS_MOVE = 'players/PLAYERS_MOVE';\n\nconst storageKey = 'stoogePlayers';\nconst storageVersion = 3;\nconst defaultState = {\n\titems: [],\n};\nconst initialState = getInitialStateFromStorage(\n\tdefaultState,\n\tstorageKey,\n\tstorageVersion,\n);\nconst persistState = createPersistStateFunction(storageKey);\n\nfunction addPlayer(state, player) {\n\tconst newState = {\n\t\t...state,\n\t\titems: [...state.items, player],\n\t};\n\n\treturn persistState(newState);\n}\n\nfunction removePlayer(state, player) {\n\tconst players = without([...state.items], player);\n\tif (players.length < state.items.length) {\n\t\tconst newState = {\n\t\t\t...state,\n\t\t\titems: players,\n\t\t};\n\n\t\treturn persistState(newState);\n\t}\n\n\treturn state;\n}\n\nfunction movePlayers(state, oldIndex, newIndex) {\n\tconst newState = {\n\t\t...state,\n\t\titems: arrayMove(state.items, oldIndex, newIndex),\n\t};\n\n\treturn persistState(newState);\n}\n\nexport default (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase PLAYERS_ADD:\n\t\t\treturn addPlayer(state, action.player);\n\t\tcase PLAYERS_REMOVE:\n\t\t\treturn removePlayer(state, action.player);\n\t\tcase PLAYERS_MOVE:\n\t\t\treturn movePlayers(state, action.oldIndex, action.newIndex);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import produce from 'immer';\nimport shortid from 'shortid';\nimport find from 'lodash/find';\nimport findIndex from 'lodash/findIndex';\nimport without from 'lodash/without';\nimport filter from 'lodash/filter';\nimport createPersistStateFunction, {\n\tgetInitialStateFromStorage,\n} from '../utils/persistState';\n\nexport const TYPE_MONSTER = 'monsters/TYPE_MONSTER';\nexport const MONSTERS_ADD = 'monsters/MONSTERS_ADD';\nexport const MONSTERS_ADD_CUSTOM = 'monsters/MONSTERS_ADD_CUSTOM';\nexport const MONSTERS_REMOVE = 'monsters/MONSTERS_REMOVE';\nexport const MONSTERS_ADD_ENCOUNTER = 'monsters/MONSTERS_ADD_ENCOUNTER';\nexport const MONSTERS_REMOVE_ENCOUNTER = 'monsters/MONSTERS_REMOVE_ENCOUNTER';\nexport const MONSTERS_SELECT_ENCOUNTER = 'monsters/MONSTERS_SELECT_ENCOUNTER';\n\nconst storageKey = 'stoogeMonsters';\nconst storageVersion = 4;\nconst defaultState = {\n\tencounters: [],\n\tcustomMonsters: [],\n\tselectedEncounter: false,\n};\nconst initialState = getInitialStateFromStorage(\n\tdefaultState,\n\tstorageKey,\n\tstorageVersion,\n);\nconst persistState = createPersistStateFunction(storageKey);\n\nconst enhanceMonster = (monster) => {\n\treturn {\n\t\tid: shortid.generate(),\n\t\tname: monster.name,\n\t\ttype: TYPE_MONSTER,\n\t\tstats: monster,\n\t};\n}\n\nfunction addMonster(state, encounterId, monster) {\n\tconst encounterIndex = findIndex(state.encounters, ['id', encounterId]);\n\tif (encounterIndex !== -1) {\n\t\tconst newEncounters = [...state.encounters];\n\t\tnewEncounters[encounterIndex].monsters.push(enhanceMonster(monster));\n\n\t\treturn persistState({\n\t\t\t...state,\n\t\t\tencounters: newEncounters,\n\t\t});\n\t}\n\n\treturn state;\n}\n\nfunction removeMonster(state, encounterId, monsterId) {\n\tconst encounterIndex = findIndex(state.encounters, ['id', encounterId]);\n\n\tif (encounterIndex !== -1) {\n\t\tconst monsterIndex = findIndex(state.encounters[encounterIndex].monsters, ['id', monsterId]);\n\n\t\tif (monsterIndex !== -1) {\n\t\t\tconst newEncounters = [...state.encounters];\n\t\t\tconst newMonsters = filter(newEncounters[encounterIndex].monsters, (mob) => mob.id !== monsterId);\n\t\t\tnewEncounters[encounterIndex].monsters = newMonsters;\n\n\t\t\treturn persistState({\n\t\t\t\t...state,\n\t\t\t\tencounters: newEncounters,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn state;\n}\n\nfunction addEncounter(state) {\n\tconst id = shortid.generate();\n\treturn persistState({\n\t\t...state,\n\t\tencounters: [\n\t\t\t...state.encounters,\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\tmonsters: [],\n\t\t\t},\n\t\t],\n\t\tselectedEncounter: id,\n\t});\n}\n\nfunction removeEncounter(state, encounterId) {\n\tconst encounter = find(state.encounters, ['id', encounterId]);\n\tif (encounter) {\n\t\tconst newState = { ...state };\n\t\tnewState.encounters = without(state.encounters, encounter);\n\t\treturn persistState(newState);\n\t}\n\n\treturn state;\n}\n\nfunction selectedEncounter(state, encounterId) {\n\tconst encounter = find(state.encounters, ['id', encounterId]);\n\tif (encounter) {\n\t\treturn persistState({\n\t\t\t...state,\n\t\t\tselectedEncounter: encounterId,\n\t\t});\n\t}\n\n\treturn state;\n}\n\nfunction addCustomMonster(state, monster) {\n\tif (monster && monster.name && monster.hit_dice && monster.customStatLink) {\n\t\treturn persistState(produce(state, (draft) => {\n\t\t\tmonster.id = shortid.generate();\n\t\t\tdraft.customMonsters.push(monster);\n\t\t}));\n\t}\n\n\treturn state;\n}\n\nexport default (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase MONSTERS_ADD:\n\t\t\treturn addMonster(state, action.encounterId, action.monster);\n\t\tcase MONSTERS_ADD_CUSTOM:\n\t\t\treturn addCustomMonster(state, action.monster);\n\t\tcase MONSTERS_REMOVE:\n\t\t\treturn removeMonster(state, action.encounterId, action.monsterId);\n\t\tcase MONSTERS_ADD_ENCOUNTER:\n\t\t\treturn addEncounter(state);\n\t\tcase MONSTERS_REMOVE_ENCOUNTER:\n\t\t\treturn removeEncounter(state, action.encounterId);\n\t\tcase MONSTERS_SELECT_ENCOUNTER:\n\t\t\treturn selectedEncounter(state, action.encounterId);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport { enhanceMonster };\n","import without from 'lodash/without';\nimport sample from 'lodash/sample';\n\nlet usedAffixes = [];\nconst affixes = [\n\t'grumpy',\n\t'happy',\n\t'sleepy',\n\t'dopey',\n\t'bashful',\n\t'sneezy',\n\t'wimpy',\n\t'large nose',\n\t'large ears',\n\t'pointy ears',\n\t'bald',\n\t'beautiful',\n\t'scarred',\n\t'one eyed',\n\t'strong',\n\t'burly',\n\t'shaggy',\n\t'bearded',\n\t'moustached',\n\t'short',\n\t'tall',\n\t'bejeweled',\n\t'nice',\n\t'foul',\n\t'foul-mouthed',\n\t'snickering',\n\t'sad',\n\t'angry',\n\t'swift',\n\t'mad',\n\t'poor',\n\t'colorful',\n\t'ugly',\n\t'smelly',\n\t'limps',\n];\nfunction resetAffix() {\n\tusedAffixes = [];\n}\nfunction getAffix() {\n\tconst affix = sample(without(affixes, ...usedAffixes));\n\t// console.log(usedAffixes);\n\tusedAffixes.push(affix);\n\treturn affix;\n}\n\nexport { getAffix, resetAffix };\n","import filter from 'lodash/filter';\nimport sortBy from 'lodash/sortBy';\nimport find from 'lodash/find';\n// import forEach from 'lodash/forEach';\n// import sample from 'lodash/sample';\n\nimport createPersistStateFunction, {\n\tgetInitialStateFromStorage,\n} from '../utils/persistState';\nimport arrayMove from '../utils/arrayMove';\nimport { TYPE_PLAYER } from './players';\nimport { getAffix, resetAffix } from '../utils/affixes';\n\nexport const INITIATIVE_MOVE = 'initiative/MOVE';\nexport const INITIATIVE_ADD = 'initiative/ADD';\nexport const INITIATIVE_REMOVE = 'initiative/REMOVE';\nexport const INITIATIVE_TRANSFER_ENCOUNTER = 'initiative/TRANSFER_ENCOUNTER';\nexport const INITIATIVE_INIT_ROLL = 'initiative/INIT_ROLL';\nexport const INITIATIVE_CLEAR_MONSTERS = 'initiative/CLEAR_MONSTERS';\nexport const INITIATIVE_SET_INITIATIVE = 'initiative/SET_INITIATIVE';\nexport const INITIATIVE_TAKE_DAMAGE = 'initiative/TAKE_DAMAGE';\nexport const INITIATIVE_HEAL_DAMAGE = 'initiative/HEAL_DAMAGE';\n\nconst storageKey = 'stoogeInitiative';\nconst storageVersion = 3;\nconst defaultState = {\n\tactors: [],\n};\nconst initialState = getInitialStateFromStorage(\n\tdefaultState,\n\tstorageKey,\n\tstorageVersion,\n);\nconst persistState = createPersistStateFunction(storageKey);\n\nfunction moveActors(state, oldIndex, newIndex) {\n\t// console.log({ oldIndex, newIndex });\n\tconst newState = {\n\t\t...state,\n\t\tactors: arrayMove(state.actors, oldIndex, newIndex),\n\t};\n\n\treturn persistState(newState);\n}\n\nfunction addActor(state, actor) {\n\tif (actor) {\n\t\tconst existingActor = find(state.actors, ['name', actor.name]);\n\t\tlet enhancedActor = actor;\n\t\tif (existingActor) {\n\t\t\tenhancedActor = {\n\t\t\t\t...actor,\n\t\t\t\taffix: getAffix(),\n\t\t\t};\n\t\t}\n\n\t\treturn persistState({\n\t\t\t...state,\n\t\t\tactors: sortBy(\n\t\t\t\t[...state.actors, enhancedActor],\n\t\t\t\t['initiative'],\n\t\t\t).reverse(),\n\t\t});\n\t}\n\n\treturn state;\n}\n\nfunction removeActor(state, actor) {\n\tconst actors = filter(\n\t\t[...state.actors],\n\t\t(stateActor) => stateActor.id !== actor.id,\n\t);\n\tif (actors.length < state.actors.length) {\n\t\tconst newState = {\n\t\t\t...state,\n\t\t\tactors,\n\t\t};\n\n\t\treturn persistState(newState);\n\t}\n\n\treturn state;\n}\n\nfunction clearMonsters(state) {\n\tconst newState = { ...state };\n\tconst actorsWithoutMonster = filter(\n\t\tstate.actors,\n\t\t(actor) => actor.type === TYPE_PLAYER,\n\t);\n\n\tnewState.actors = actorsWithoutMonster;\n\tresetAffix();\n\n\treturn persistState(newState);\n}\n\nfunction setActorInitiative(state, actor, initiative) {\n\tconst actorIndex = state.actors.indexOf(actor);\n\tif (actorIndex !== -1) {\n\t\tconst newActors = filter(\n\t\t\tstate.actors,\n\t\t\t(stateActor) => stateActor.id !== actor.id,\n\t\t);\n\n\t\tnewActors.push({\n\t\t\t...actor,\n\t\t\tinitiative,\n\t\t});\n\n\t\tconst newState = {\n\t\t\t...state,\n\t\t\tactors: sortBy(newActors, ['initiative']).reverse(),\n\t\t};\n\n\t\treturn persistState(newState);\n\t}\n\n\treturn state;\n}\n\nfunction takeDamage(state, actor, damage) {\n\tconst actorIndex = state.actors.indexOf(actor);\n\tif (actorIndex !== -1 && damage) {\n\t\tconst damagedActor = {\n\t\t\t...actor,\n\t\t\tcurrentHP: actor.currentHP - damage,\n\t\t};\n\n\t\tconst newState = { ...state };\n\t\tnewState.actors[actorIndex] = damagedActor;\n\n\t\treturn persistState(newState);\n\t}\n\n\treturn state;\n}\n\nfunction healDamage(state, actor, heal) {\n\treturn takeDamage(state, actor, -heal);\n}\n\nexport default (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase INITIATIVE_ADD:\n\t\t\treturn addActor(state, action.actor);\n\t\tcase INITIATIVE_REMOVE:\n\t\t\treturn removeActor(state, action.actor);\n\t\tcase INITIATIVE_MOVE:\n\t\t\treturn moveActors(state, action.oldIndex, action.newIndex);\n\t\tcase INITIATIVE_CLEAR_MONSTERS:\n\t\t\treturn clearMonsters(state);\n\t\tcase INITIATIVE_SET_INITIATIVE:\n\t\t\treturn setActorInitiative(state, action.actor, action.initiative);\n\t\tcase INITIATIVE_TAKE_DAMAGE:\n\t\t\treturn takeDamage(state, action.actor, Math.abs(action.damage));\n\t\tcase INITIATIVE_HEAL_DAMAGE:\n\t\t\treturn healDamage(state, action.actor, Math.abs(action.heal));\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { combineReducers } from 'redux';\nimport players from './players';\nimport monsters from './monsters';\nimport initiative from './initiative';\n\nexport default combineReducers({\n\tplayers,\n\tmonsters,\n\tinitiative,\n});\n","export const ADD_ACTOR = 'ADD_ACTOR';\nexport const REMOVE_ACTOR = 'REMOVE_ACTOR';\n","const calcModifier = (stat = 10) => {\n\treturn Math.floor((stat - 10) / 2);\n};\n\nconst prettyModifier = (stat) => {\n\tconst modifier = calcModifier(stat);\n\treturn modifier >= 0 ? `+${modifier}` : modifier;\n};\n\nexport { calcModifier, prettyModifier };\nexport default calcModifier;\n","import random from 'lodash/random';\nimport { calcModifier } from './statModifiers';\n\nconst dieRoll = (dieNotation = '', dieModifier = 0) => {\n\tconst match = /^(\\d+)?d(\\d+)([+-]\\d+)?$/.exec(dieNotation);\n\tif (!match) {\n\t\tthrow new Error(`Invalid dice notation: ${dieNotation}`);\n\t}\n\n\tconst howMany = typeof match[1] === 'undefined' ? 1 : parseInt(match[1], 10);\n\tconst dieSize = parseInt(match[2], 10);\n\tconst modifier = typeof match[3] === 'undefined' ? 0 : parseInt(match[3], 10);\n\n\t// console.log({\n\t// \thowMany,\n\t// \tdieSize,\n\t// \tdieModifier,\n\t// \tmodifier,\n\t// });\n\n\tlet rollSum = 0;\n\tfor (let rollCount = 0; rollCount < howMany; rollCount++) {\n\t\trollSum += random(1, dieSize) + dieModifier;\n\t}\n\n\treturn rollSum + modifier;\n};\n\nconst hitDieRoll = (dieNotation, constitution) => {\n\tconst hitDieModifier = calcModifier(constitution);\n\treturn dieRoll(dieNotation, hitDieModifier);\n};\n\nexport { hitDieRoll, dieRoll };\nexport default dieRoll;\n","import {\n\ttake, all, fork, put,\n} from 'redux-saga/effects';\nimport shortid from 'shortid';\n// import forEach from 'lodash/forEach';\nimport isNaN from 'lodash/isNaN';\nimport random from 'lodash/random';\nimport filter from 'lodash/filter';\nimport { ADD_ACTOR, REMOVE_ACTOR } from '../actions';\nimport { TYPE_PLAYER, PLAYERS_ADD, PLAYERS_REMOVE } from '../reducers/players';\nimport {\n\tINITIATIVE_ADD,\n\tINITIATIVE_REMOVE,\n\tINITIATIVE_TRANSFER_ENCOUNTER,\n\tINITIATIVE_CLEAR_MONSTERS,\n\tINITIATIVE_INIT_ROLL,\n\tINITIATIVE_SET_INITIATIVE,\n} from '../reducers/initiative';\nimport { TYPE_MONSTER } from '../reducers/monsters';\nimport { calcModifier } from '../utils/statModifiers';\nimport { hitDieRoll } from '../utils/dieRoll';\n\nfunction* watchTransferMonsters() {\n\twhile (true) {\n\t\tconst { monsters } = yield take(INITIATIVE_TRANSFER_ENCOUNTER);\n\t\tyield put({ type: INITIATIVE_CLEAR_MONSTERS });\n\n\t\tfor (let index = 0; index < monsters.length; index++) {\n\t\t\tconst monster = monsters[index];\n\t\t\tyield put({\n\t\t\t\ttype: ADD_ACTOR,\n\t\t\t\tactor: monster,\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction getInitiativeForActor(actor) {\n\tif (actor.type === TYPE_MONSTER) {\n\t\treturn random(1, 20) + calcModifier(actor.stats.dexterity);\n\t}\n\n\treturn 0;\n}\n\nfunction getHPforActor(actor) {\n\tif (actor.type === TYPE_MONSTER) {\n\t\treturn hitDieRoll(actor.stats.hit_dice, actor.stats.constitution);\n\t}\n\n\treturn null;\n}\n\nfunction* watchAddActor() {\n\twhile (true) {\n\t\tconst { actor } = yield take(ADD_ACTOR);\n\t\tconst maxHP = getHPforActor(actor);\n\t\tconst enhancedActor = {\n\t\t\tid: shortid.generate(),\n\t\t\tinitiative: getInitiativeForActor(actor),\n\t\t\taffix: '',\n\t\t\tcurrentHP: maxHP,\n\t\t\tmaxHP,\n\t\t\t...actor,\n\t\t};\n\n\t\tif (enhancedActor.type === TYPE_PLAYER) {\n\t\t\tyield put({ type: PLAYERS_ADD, player: enhancedActor });\n\t\t\tyield put({ type: INITIATIVE_ADD, actor: enhancedActor });\n\t\t}\n\n\t\tif (enhancedActor.type === TYPE_MONSTER) {\n\t\t\t// yield put({ type: MONSTERS_ADD, monster: enhancedActor });\n\t\t\tyield put({ type: INITIATIVE_ADD, actor: enhancedActor });\n\t\t}\n\t}\n}\n\nfunction* watchRemoveActor() {\n\twhile (true) {\n\t\tconst { actor } = yield take(REMOVE_ACTOR);\n\n\t\tif (actor.type === TYPE_PLAYER) {\n\t\t\tyield put({ type: PLAYERS_REMOVE, player: actor });\n\t\t\tyield put({ type: INITIATIVE_REMOVE, actor });\n\t\t}\n\n\t\tif (actor.type === TYPE_MONSTER) {\n\t\t\t// yield put({ type: MONSTERS_REMOVE, monster: actor });\n\t\t\t// yield put({ type: INITIATIVE_REMOVE, actor: actor });\n\t\t}\n\t}\n}\n\nfunction* watchRollInitiative() {\n\twhile (true) {\n\t\tconst { actors } = yield take(INITIATIVE_INIT_ROLL);\n\t\tconst actorsWithoutMonster = filter(\n\t\t\tactors,\n\t\t\t(actor) => actor.type === TYPE_PLAYER,\n\t\t);\n\n\t\tfor (let index = 0; index < actorsWithoutMonster.length; index++) {\n\t\t\tconst actor = actorsWithoutMonster[index];\n\t\t\tconst initiative = parseInt(\n\t\t\t\tprompt(`Enter initiative for ${actor.name}.`),\n\t\t\t\t10,\n\t\t\t);\n\n\t\t\tif (!isNaN(initiative)) {\n\t\t\t\tyield put({\n\t\t\t\t\ttype: INITIATIVE_SET_INITIATIVE,\n\t\t\t\t\tactor,\n\t\t\t\t\tinitiative,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default function* watchInitiative() {\n\tyield all([\n\t\tfork(watchAddActor),\n\t\tfork(watchRemoveActor),\n\t\tfork(watchTransferMonsters),\n\t\tfork(watchRollInitiative),\n\t]);\n}\n","import { all, fork } from 'redux-saga/effects';\nimport watchInitiative from './initiative';\n\nexport default function* rootSaga() {\n\tyield all([fork(watchInitiative)]);\n}\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport createHistory from 'history/createBrowserHistory';\nimport createSagaMiddleware from 'redux-saga';\nimport rootReducer from './reducers';\n\nimport rootSaga from './sagas';\n\nexport const history = createHistory();\n\nconst initialState = {};\nconst enhancers = [];\nconst sagaMiddleware = createSagaMiddleware();\nconst middleware = [routerMiddleware(history), sagaMiddleware];\n\nif (process.env.NODE_ENV === 'development') {\n\tconst devToolsExtension = window.__REDUX_DEVTOOLS_EXTENSION__;\n\n\tif (typeof devToolsExtension === 'function') {\n\t\tenhancers.push(devToolsExtension());\n\t}\n}\n\nconst composedEnhancers = compose(\n\tapplyMiddleware(...middleware),\n\t...enhancers,\n);\n\nconst store = createStore(\n\tconnectRouter(history)(rootReducer),\n\tinitialState,\n\tcomposedEnhancers,\n);\n\n// then run the saga\nsagaMiddleware.run(rootSaga);\n\nexport default store;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport isNaN from 'lodash/isNaN';\nimport { prettyModifier } from '../../utils/statModifiers';\n\nimport IconDamage from './damage.svg';\nimport IconHeal from './heal.svg';\n\nimport './monsterstats.scss';\nimport {\n\tINITIATIVE_TAKE_DAMAGE,\n\tINITIATIVE_HEAL_DAMAGE,\n} from '../../reducers/initiative';\n\n/* eslint-disable no-floating-decimal */\nconst CR_TO_XP_TABLE = {\n\t0: 10,\n\t0.125: 25,\n\t0.25: 50,\n\t0.5: 100,\n\t1: 200,\n\t2: 450,\n\t3: 700,\n\t4: 1100,\n\t5: 1800,\n\t6: 2300,\n\t7: 2900,\n\t8: 3900,\n\t9: 5000,\n\t10: 5900,\n\t11: 7200,\n\t12: 8400,\n\t13: 10000,\n\t14: 11500,\n\t15: 13000,\n\t16: 15000,\n\t17: 18000,\n\t18: 20000,\n\t19: 22000,\n\t20: 25000,\n\t21: 33000,\n\t22: 41000,\n\t23: 50000,\n\t24: 62000,\n\t25: 75000,\n\t26: 90000,\n\t27: 105000,\n\t28: 120000,\n\t29: 135000,\n\t30: 155000,\n};\n/* eslint-enable no-floating-decimal */\n\nconst CR2XP = (cr) => {\n\tconst xp = CR_TO_XP_TABLE[cr];\n\treturn xp !== undefined ? `${cr} (${xp} XP)` : 'Unknown';\n};\n\nconst SKILLS = [\n\t'athletics',\n\t'acrobatics',\n\t'sleight_of_hand',\n\t'stealth',\n\t'arcana',\n\t'history',\n\t'investigation',\n\t'nature',\n\t'religion',\n\t'animal_handling',\n\t'insight',\n\t'medicine',\n\t'perception',\n\t'survival',\n\t'deception',\n\t'intimidation',\n\t'performance',\n\t'persuasion',\n];\nconst SKILLS_NAMES = [\n\t'Athletics',\n\t'Acrobatics',\n\t'Sleight of Hand',\n\t'Stealth',\n\t'Arcana',\n\t'History',\n\t'Investigation',\n\t'Nature',\n\t'Religion',\n\t'Animal Handling',\n\t'Insight',\n\t'Medicine',\n\t'Perception',\n\t'Survival',\n\t'Deception',\n\t'Intimidation',\n\t'Performance',\n\t'Persuasion',\n];\n\nconst PLAIN_VALUE_FORMATTER = (name, value) => value;\nconst joinStats = (\n\ttitle,\n\tdata,\n\tstats = [],\n\tnames = [],\n\tformatter = (name, value) => {\n\t\treturn `${name} ${prettyModifier(value)}`;\n\t},\n) => {\n\tconst joinedStats = stats\n\t\t.reduce((prev, curr, index) => {\n\t\t\tif (data[curr]) {\n\t\t\t\tconst name = names[index];\n\t\t\t\tprev.push(formatter(name, data[curr]));\n\t\t\t\treturn prev;\n\t\t\t}\n\n\t\t\treturn prev;\n\t\t}, [])\n\t\t.join(', ');\n\n\tif (joinedStats.length) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<strong>{title}</strong> {joinedStats}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n\nconst keyToNameFormatter = (key) => {\n\tconst spacedStr = key.replace('_', ' ');\n\treturn spacedStr.charAt(0).toUpperCase() + spacedStr.slice(1);\n};\n\nconst MonsterStats = ({ monster, dispatch }) => {\n\tif (!monster) {\n\t\treturn null;\n\t}\n\n\tconst { stats } = monster;\n\n\treturn (\n\t\t<div className=\"monsterstats\">\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tclassName=\"monsterstats__adjust-hp\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst damage = parseInt(prompt('Enter damage amount.'), 10);\n\t\t\t\t\t\tif (!isNaN(damage)) {\n\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\ttype: INITIATIVE_TAKE_DAMAGE,\n\t\t\t\t\t\t\t\tactor: monster,\n\t\t\t\t\t\t\t\tdamage,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<img src={IconDamage} alt=\"Take damage\" />\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tclassName=\"monsterstats__adjust-hp monsterstats__adjust-hp--heal\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst heal = parseInt(prompt('Enter healing amount.'), 10);\n\t\t\t\t\t\tif (!isNaN(heal)) {\n\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\ttype: INITIATIVE_HEAL_DAMAGE,\n\t\t\t\t\t\t\t\tactor: monster,\n\t\t\t\t\t\t\t\theal,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<img src={IconHeal} alt=\"Heal\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t{!!stats.customStatLink && (\n\t\t\t\t<>\n\t\t\t\t\t<h2>{monster.name}</h2>\n\t\t\t\t\t<iframe src={stats.customStatLink} sandbox=\"\" title={monster.name}></iframe>\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{!stats.customStatLink && (\n\t\t\t\t<>\n\t\t\t\t\t<h2>{monster.name}</h2>\n\t\t\t\t\t<strong>\n\t\t\t\t\t\t{`\n\t\t\t\t\t\t\t${stats.size}\n\t\t\t\t\t\t\t${stats.type}${stats.subtype ? ` (${stats.subtype})` : ''},\n\t\t\t\t\t\t\t${stats.alignment}\n\t\t\t\t\t\t`}\n\t\t\t\t\t</strong>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<strong>AC:</strong> {stats.armor_class}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<strong>HP:</strong> {stats.hit_points} ({stats.hit_dice})<br />\n\t\t\t\t\t\t<strong>Speed:</strong> {stats.speed}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<table width=\"100%\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t{['STR', 'DEX', 'CON', 'INT', 'WIS', 'CHA'].map((ability) => (\n\t\t\t\t\t\t\t\t\t<th key={ability}>{ability}</th>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t\t'strength',\n\t\t\t\t\t\t\t\t\t'dexterity',\n\t\t\t\t\t\t\t\t\t'constitution',\n\t\t\t\t\t\t\t\t\t'intelligence',\n\t\t\t\t\t\t\t\t\t'wisdom',\n\t\t\t\t\t\t\t\t\t'charisma',\n\t\t\t\t\t\t\t\t].map((ability) => (\n\t\t\t\t\t\t\t\t\t<td key={ability}>\n\t\t\t\t\t\t\t\t\t\t{stats[ability]} ({prettyModifier(stats[ability])})\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\n\t\t\t\t\t<hr />\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{joinStats(\n\t\t\t\t\t\t\t'Saving throws',\n\t\t\t\t\t\t\tstats,\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t'strength_save',\n\t\t\t\t\t\t\t\t'dexterity_save',\n\t\t\t\t\t\t\t\t'constitution_save',\n\t\t\t\t\t\t\t\t'intelligence_save',\n\t\t\t\t\t\t\t\t'wisdom_save',\n\t\t\t\t\t\t\t\t'charisma_save',\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t['Str', 'Dex', 'Con', 'Int', 'Wis', 'Cha'],\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>{joinStats('Skills', stats, SKILLS, SKILLS_NAMES)}</div>\n\t\t\t\t\t{[\n\t\t\t\t\t\t'damage_vulnerabilities',\n\t\t\t\t\t\t'damage_resistances',\n\t\t\t\t\t\t'damage_immunities',\n\t\t\t\t\t\t'condition_immunities',\n\t\t\t\t\t\t'senses',\n\t\t\t\t\t\t'languages',\n\t\t\t\t\t].map((key) => (\n\t\t\t\t\t\t<div key={key}>\n\t\t\t\t\t\t\t{joinStats(\n\t\t\t\t\t\t\t\tkeyToNameFormatter(key),\n\t\t\t\t\t\t\t\tstats,\n\t\t\t\t\t\t\t\t[key],\n\t\t\t\t\t\t\t\t[],\n\t\t\t\t\t\t\t\tPLAIN_VALUE_FORMATTER,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{joinStats(\n\t\t\t\t\t\t\t'Challenge',\n\t\t\t\t\t\t\tstats,\n\t\t\t\t\t\t\t['challenge_rating'],\n\t\t\t\t\t\t\t[],\n\t\t\t\t\t\t\t(name, value) => CR2XP(value),\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{['special_abilities', 'actions', 'legendary_actions'].map((section) => {\n\t\t\t\t\t\tif (stats[section]) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Fragment key={section}>\n\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<h4>{keyToNameFormatter(section)}</h4>\n\n\t\t\t\t\t\t\t\t\t\t{stats[section].map((action, i) => (\n\t\t\t\t\t\t\t\t\t\t\t<div key={action.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t<em>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<strong>{action.name}</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t</em>{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t<pre>{action.desc}</pre>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nMonsterStats.propTypes = {\n\tdispatch: PropTypes.func.isRequired,\n\tmonster: PropTypes.oneOfType([PropTypes.shape({}), PropTypes.oneOf([false])]),\n};\n\nMonsterStats.defaultProps = {\n\tmonster: false,\n};\n\nexport default connect((state, props) => {\n\tconst {\n\t\tmatch: {\n\t\t\tparams: { id },\n\t\t},\n\t} = props;\n\treturn {\n\t\t...state,\n\t\tmonster: state.initiative.actors.find((monster) => {\n\t\t\treturn monster.stats && monster.id === id;\n\t\t}),\n\t};\n})(MonsterStats);\n","const RAINBOW =\t'linear-gradient(to left, #e81123, #e81123 17%, #f7941d 17%, #f7941d 34%, #fff100 34%, #fff100 51%, #00a650 51%, #00a650 68%, #0054a5 68%, #0054a5 85%, #672d93 85%, #672d93)';\nconst colors = {\n\tblue: { main: 'blue', complement: '#fff' },\n\tred: { main: 'red', complement: '#fff' },\n\tgreen: { main: 'green', complement: '#fff' },\n\tgold: { main: 'gold', complement: '#fff' },\n\tsilver: { main: 'silver', complement: '#fff' },\n\tblack: { main: 'black', complement: '#fff' },\n\tbrown: { main: '#4c270c', complement: '#fff' },\n\tzombie: { main: '#a6bd4f', complement: '#fff' },\n\tgoblin: { main: '#41924B', complement: '#fff' },\n\tunicorn: { main: 'pink', complement: '#000', gradient: RAINBOW },\n\tblood: { main: '#8a0707', complement: '#fff' },\n\tcopper: { main: '#b87333', complement: '#fff' },\n\tbronze: { main: '#cd7f32', complement: '#fff' },\n\tbrass: { main: '#b5a642', complement: '#fff' },\n};\n\nconst getColorsFromName = (name) => {\n\tconst lcName = name.toLowerCase();\n\tconst colorNames = Object.keys(colors);\n\n\tfor (let index = 0; index < colorNames.length; index++) {\n\t\tconst colorName = colorNames[index];\n\t\tif (lcName.indexOf(colorName) !== -1) {\n\t\t\tconst styleObj = colors[colorName];\n\t\t\tif (styleObj && typeof styleObj === 'object') {\n\t\t\t\treturn styleObj;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {};\n};\n\nexport default getColorsFromName;\n","import React from 'react';\n// import PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\n\nconst OptionalNavLink = (props) => {\n\tconst { to } = props;\n\n\tif (to) {\n\t\treturn <NavLink {...props} />;\n\t}\n\n\treturn <span {...props} to={undefined} />;\n};\n\nexport default OptionalNavLink;\n","/* eslint-disable react/no-multi-comp */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport classnames from 'classnames';\nimport getColorsFromName from '../../utils/colorFromName';\nimport OptionalNavLink from '../optionalLink';\n\nimport './list.scss';\n\nconst PROPTYPE_ITEM = PropTypes.shape({\n\tname: PropTypes.string.isRequired,\n});\nconst PROPTYPE_ITEMS = PropTypes.arrayOf(PROPTYPE_ITEM);\n\nconst colorToStyle = (colors) => {\n\tconst style = {};\n\n\tif (colors.gradient) {\n\t\tstyle.borderImage = `${colors.gradient} 0 0 1 0 / 1px / 0 stretch`;\n\t}\n\n\tif (colors.main) {\n\t\tstyle.borderBottomColor = colors.main;\n\t}\n\n\treturn style;\n};\n\nconst SortableItem = SortableElement(\n\t({\n\t\titem,\n\t\tactions,\n\t\tindex,\n\t\tlinkGen,\n\t\tcolorNames,\n\t\textraComponent: ExtraComponent,\n\t}) => {\n\t\t// console.log(item);\n\t\tconst colors = getColorsFromName(item.name);\n\t\tconst colorStyles = colorNames ? colorToStyle(colors) : {};\n\n\t\treturn (\n\t\t\t<li className=\"trackerlist-item\">\n\t\t\t\t<OptionalNavLink to={linkGen(item)} className=\"trackerlist-item__link\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={classnames({\n\t\t\t\t\t\t\t'trackerlist-item__link__name': true,\n\t\t\t\t\t\t\t'trackerlist-item__link__name--monster': item.stats,\n\t\t\t\t\t\t\t'trackerlist-item__link__name--player': !item.stats,\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tstyle={colorStyles}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t{!!item.affix && (\n\t\t\t\t\t\t\t<span className=\"trackerlist-item__link__name__affix\">\n\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t({item.affix})\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</span>\n\t\t\t\t\t{!!ExtraComponent && <ExtraComponent item={item} id={item.id} />}\n\t\t\t\t</OptionalNavLink>\n\n\t\t\t\t<span className=\"trackerlist-item__actions\">\n\t\t\t\t\t{actions.map((action) => (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tkey={action.key}\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclassName=\"trackerlist-item__actions__button\"\n\t\t\t\t\t\t\tonClick={() => action.onClick(item)}\n\t\t\t\t\t\t\ttitle={action.title}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img src={action.glyph} alt=\"-\" height=\"20\" width=\"20\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t))}\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t);\n\t},\n);\n\nSortableItem.propTypes = {\n\tactions: PropTypes.arrayOf(PropTypes.shape({})),\n\tlinkGen: PropTypes.func.isRequired,\n\titem: PROPTYPE_ITEM.isRequired,\n};\n\nSortableItem.defaultProps = {\n\tactions: [],\n};\n\nconst SortableList = SortableContainer(\n\t({\n\t\titems,\n\t\tdisableDragging,\n\t\tactions,\n\t\tlinkGen,\n\t\tcolorNames,\n\t\textraComponent,\n\t}) => {\n\t\treturn (\n\t\t\t<ol className=\"trackerlist\">\n\t\t\t\t{items.map((item, index) => (\n\t\t\t\t\t<SortableItem\n\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\titem={item}\n\t\t\t\t\t\tdisabled={disableDragging}\n\t\t\t\t\t\tactions={actions}\n\t\t\t\t\t\tlinkGen={linkGen}\n\t\t\t\t\t\tcolorNames={colorNames}\n\t\t\t\t\t\textraComponent={extraComponent}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ol>\n\t\t);\n\t},\n);\n\nSortableList.propTypes = {\n\t...SortableList.propTypes,\n\titems: PROPTYPE_ITEMS.isRequired,\n\tonSortEnd: PropTypes.func.isRequired,\n\tdisableDragging: PropTypes.bool,\n\tcolorNames: PropTypes.bool,\n\textraComponent: PropTypes.func,\n};\n\nSortableList.defaultProps = {\n\t...SortableList.defaultProps,\n\tdisableDragging: false,\n\tlockAxis: 'y',\n\tdistance: 2,\n\thelperClass: 'dragging',\n\tlinkGen: () => false,\n\tcolorNames: false,\n\textraComponent: null,\n};\n\nexport default SortableList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './sidebarLayout.scss';\n\nconst SidebarLayout = ({ children }) => {\n\treturn (\n\t\t<div className=\"sidebarlayout\">\n\t\t\t<div className=\"sidebarlayout__sidebar\">{children[0]}</div>\n\t\t\t<div className=\"sidebarlayout__content\">{children[1]}</div>\n\t\t</div>\n\t);\n};\n\nSidebarLayout.propTypes = {\n\tchildren: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.node),\n\t\tPropTypes.node,\n\t]).isRequired,\n};\n\nexport default SidebarLayout;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './sidebarActions.scss';\n\nconst SidebarActions = ({ buttons }) => (\n\t<div className=\"sidebar-actions\">\n\t\t{buttons.map((button) => (\n\t\t\t<button\n\t\t\t\tkey={button.key}\n\t\t\t\ttype=\"submit\"\n\t\t\t\tonClick={button.onClick}\n\t\t\t\ttitle={button.title}\n\t\t\t\tclassName=\"sidebar-actions__button\"\n\t\t\t>\n\t\t\t\t<img src={button.glyph} alt=\"\" />\n\t\t\t</button>\n\t\t))}\n\t</div>\n);\n\nSidebarActions.propTypes = {\n\tbuttons: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\tkey: PropTypes.string.isRequired,\n\t\t\tonClick: PropTypes.func.isRequired,\n\t\t\ttitle: PropTypes.string.isRequired,\n\t\t\tglyph: PropTypes.string.isRequired,\n\t\t}),\n\t).isRequired,\n};\n\nexport default SidebarActions;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport find from 'lodash/find';\n\nconst HPGauge = ({ maxHP, currentHP, initiative }) => {\n\tconst skull = '☠';\n\treturn (\n\t\t<Fragment>\n\t\t\t<span className=\"trackerlist-item__link__initiative\">{initiative}</span>\n\t\t\t{!!maxHP && (\n\t\t\t\t<span className=\"trackerlist-item__link__hp\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"trackerlist-item__link__hp__current\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\theight: `${(100 / maxHP) * currentHP}%`,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<span className=\"trackerlist-item__link__hp__display\">\n\t\t\t\t\t\t{currentHP <= 0 && <Fragment>{skull} </Fragment>}\n\t\t\t\t\t\t{currentHP} / {maxHP}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n};\n\nHPGauge.propTypes = {\n\tmaxHP: PropTypes.number,\n\tcurrentHP: PropTypes.number,\n\tinitiative: PropTypes.number.isRequired,\n};\n\nHPGauge.defaultProps = {\n\tmaxHP: null,\n\tcurrentHP: null,\n};\n\nexport default connect((state, props) => {\n\tconst { id } = props;\n\tconst {\n\t\tinitiative: { actors },\n\t} = state;\n\tconst currentActor = find(actors, ['id', id]);\n\tconst { maxHP, currentHP, initiative } = currentActor;\n\n\treturn { maxHP, currentHP, initiative };\n})(HPGauge);\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Switch, Route } from 'react-router';\nimport { connect } from 'react-redux';\n// import forEach from 'lodash/forEach';\n// import { Link } from 'react-router-dom';\nimport MonsterStats from '../../components/monsterstats';\nimport SortableList from '../../components/list';\n\n// import IconMinotaur from './minotaur.svg';\n// import IconSwordman from './swordman.svg';\nimport IconRoll from './roll.svg';\n\nimport './initiative.scss';\nimport SidebarLayout from '../../components/sidebarLayout';\nimport {\n\tINITIATIVE_MOVE,\n\tINITIATIVE_INIT_ROLL,\n} from '../../reducers/initiative';\nimport SidebarActions from '../../components/sidebarActions';\nimport HPGauge from './hpGauge';\n\nclass InitiativeTracker extends Component {\n\tstatic propTypes = {\n\t\tdispatch: PropTypes.func.isRequired,\n\t\tactors: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n\t};\n\n\trender() {\n\t\tconst { actors } = this.props;\n\t\treturn (\n\t\t\t<SidebarLayout>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<SidebarActions\n\t\t\t\t\t\tbuttons={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'roll-initiative',\n\t\t\t\t\t\t\t\tonClick: this.rollInitiative,\n\t\t\t\t\t\t\t\tglyph: IconRoll,\n\t\t\t\t\t\t\t\ttitle: 'Input initiative',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={actors}\n\t\t\t\t\t\tonSortEnd={this.onSortEnd}\n\t\t\t\t\t\tlinkGen={(item) => (item.stats\n\t\t\t\t\t\t\t? `/initiative/monster/${item.id}`\n\t\t\t\t\t\t\t: `/initiative/player/${item.id}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t\textraComponent={HPGauge}\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/initiative/monster/:id\" component={MonsterStats} />\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tpath=\"/initiative/player/:id\"\n\t\t\t\t\t\t\tcomponent={() => <div>Nothing to see here</div>}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Switch>\n\t\t\t\t</Fragment>\n\t\t\t</SidebarLayout>\n\t\t);\n\t}\n\n\tonSortEnd = ({ oldIndex, newIndex }) => {\n\t\tconst { dispatch } = this.props;\n\t\tdispatch({\n\t\t\ttype: INITIATIVE_MOVE,\n\t\t\toldIndex,\n\t\t\tnewIndex,\n\t\t});\n\t};\n\n\trollInitiative = () => {\n\t\tconst { dispatch, actors } = this.props;\n\n\t\tdispatch({\n\t\t\ttype: INITIATIVE_INIT_ROLL,\n\t\t\tactors,\n\t\t});\n\t};\n}\n\nexport default connect((state) => ({\n\tdispatch: state.dispatch,\n\tactors: state.initiative.actors,\n}))(InitiativeTracker);\n","/* eslint-disable react/no-multi-comp */\nimport React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\n\nimport './encounterList.scss';\nimport {\n\tMONSTERS_ADD_ENCOUNTER,\n\tMONSTERS_REMOVE_ENCOUNTER,\n\tMONSTERS_SELECT_ENCOUNTER,\n\tMONSTERS_REMOVE,\n\tMONSTERS_ADD_CUSTOM,\n} from '../../reducers/monsters';\nimport { INITIATIVE_TRANSFER_ENCOUNTER } from '../../reducers/initiative';\n\nconst PROPTYPE_ENCOUNTER = PropTypes.shape({\n\tid: PropTypes.string.isRequired,\n\tmonsters: PropTypes.arrayOf(PropTypes.shape({})),\n});\nconst PROPTYPE_ITEMS = PropTypes.arrayOf(PROPTYPE_ENCOUNTER);\n\nconst addEncounter = (dispatch) => {\n\tdispatch({\n\t\ttype: MONSTERS_ADD_ENCOUNTER,\n\t});\n};\n\nconst addCustomEncounter = (dispatch) => {\n\tconst monster = {\n\t\tname: window.prompt('Monster name?'),\n\t\thit_dice: window.prompt('Hit dice? (ex. 2d8)'),\n\t\tcustomStatLink: window.prompt('Stats link? ( https://www.aidedd.org/dnd-filters/monsters.php )'),\n\t};\n\n\tdispatch({\n\t\ttype: MONSTERS_ADD_CUSTOM,\n\t\tmonster,\n\t});\n};\n\nconst removeEncounter = (dispatch, encounterId) => {\n\tif (encounterId) {\n\t\tdispatch({\n\t\t\ttype: MONSTERS_REMOVE_ENCOUNTER,\n\t\t\tencounterId,\n\t\t});\n\t}\n};\n\nconst selectEncounter = (dispatch, newSelectedEncounter, selectedEncounter) => {\n\tif (selectedEncounter !== newSelectedEncounter) {\n\t\tdispatch({\n\t\t\ttype: MONSTERS_SELECT_ENCOUNTER,\n\t\t\tencounterId: newSelectedEncounter,\n\t\t});\n\t}\n};\n\nconst transferMonsters = (dispatch, monsters) => {\n\tdispatch({\n\t\ttype: INITIATIVE_TRANSFER_ENCOUNTER,\n\t\tmonsters,\n\t});\n};\n\nconst removeMonster = (dispatch, encounterId, monsterId) => {\n\tdispatch({\n\t\ttype: MONSTERS_REMOVE,\n\t\tencounterId,\n\t\tmonsterId,\n\t});\n};\n\nconst MonsterItem = ({ dispatch, encounter, monster, index }) => {\n\treturn (\n\t\t<li>\n\t\t\t{monster.name}\n\t\t\t<button\n\t\t\t\tclassName=\"encounter-list__encounter__monster__button\"\n\t\t\t\tonClick={() => removeMonster(dispatch, encounter.id, monster.id)}>\n\t\t\t\t-\n\t\t\t</button>\n\t\t</li>\n\t);\n};\n\nconst EncounterList = (props) => {\n\tconst { dispatch, encounter, selectedEncounter } = props;\n\tconst { monsters } = encounter;\n\treturn (\n\t\t<div\n\t\t\tclassName={classnames({\n\t\t\t\t'encounter-list__encounter': true,\n\t\t\t\t'encounter-list__encounter--selected':\n\t\t\t\t\tselectedEncounter === encounter.id,\n\t\t\t})}\n\t\t\tonClick={() => selectEncounter(dispatch, encounter.id, selectedEncounter)}\n\t\t\tonKeyDown={(e) => {\n\t\t\t\tconst SPACE = 32;\n\t\t\t\tconst ENTER = 13;\n\t\t\t\tif (e.keyCode === SPACE || e.keyCode === ENTER) {\n\t\t\t\t\tselectEncounter(dispatch, encounter.id, selectedEncounter);\n\t\t\t\t}\n\t\t\t}}\n\t\t\trole=\"tab\"\n\t\t\ttabIndex={0}\n\t\t>\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tremoveEncounter(dispatch, encounter.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tdelete\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\ttransferMonsters(dispatch, monsters);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\ttransfer to initiative\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<ol className=\"encounter-list__encounter__monsters\">\n\t\t\t\t{monsters.map((monster, index) => (\n\t\t\t\t\t<MonsterItem\n\t\t\t\t\t\tkey={monster.id + index}\n\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\tmonster={monster}\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ol>\n\t\t</div>\n\t);\n};\n\nEncounterList.defaultProps = {\n\t...EncounterList.defaultProps,\n};\n\nconst MonsterEncounters = ({ dispatch, encounters, selectedEncounter }) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<div className=\"encounter-list\">\n\t\t\t\t<div className=\"encounter-list__actions\">\n\t\t\t\t\t<button type=\"submit\" onClick={() => addEncounter(dispatch)}>\n\t\t\t\t\t\tNew encounter\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type=\"submit\" onClick={() => addCustomEncounter(dispatch)}>\n\t\t\t\t\t\tAdd custom monster\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t{encounters.map((encounter) => (\n\t\t\t\t\t<EncounterList\n\t\t\t\t\t\tkey={encounter.id}\n\t\t\t\t\t\tdispatch={dispatch}\n\t\t\t\t\t\tencounter={encounter}\n\t\t\t\t\t\tselectedEncounter={selectedEncounter}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n};\n\nMonsterEncounters.propTypes = {\n\tencounters: PROPTYPE_ITEMS.isRequired,\n\tselectedEncounter: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.oneOf([false]),\n\t]).isRequired,\n\tdispatch: PropTypes.func.isRequired,\n\t// onSortEnd: PropTypes.func.isRequired,\n};\n\nMonsterEncounters.defaultProps = {};\n\nexport default connect((state) => {\n\tconst { monsters } = state;\n\tconst { encounters, selectedEncounter } = monsters;\n\n\treturn {\n\t\tdispatch: state.dispatch,\n\t\tencounters,\n\t\tselectedEncounter,\n\t};\n})(MonsterEncounters);\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport filter from 'lodash/filter';\nimport findIndex from 'lodash/findIndex';\n\nimport SidebarLayout from '../../components/sidebarLayout';\nimport SortableList from '../../components/list';\nimport MonsterEncounters from './encounterList';\nimport { ADD_ACTOR } from '../../actions';\nimport { PLAYERS_ADD } from '../../reducers/players';\nimport { MONSTERS_ADD, enhanceMonster } from '../../reducers/monsters';\nimport IconAdd from '../../svg/add.svg';\nimport IconLightning from '../../svg/lightning.svg';\n\nimport './monsters.scss';\n\nclass MonsterLookup extends Component {\n\tstatic propTypes = {\n\t\tdispatch: PropTypes.func.isRequired,\n\t\tmonsters: PropTypes.shape({\n\t\t\tencounters: PropTypes.arrayOf(\n\t\t\t\tPropTypes.shape({\n\t\t\t\t\tid: PropTypes.string.isRequired,\n\t\t\t\t}),\n\t\t\t).isRequired,\n\t\t}).isRequired,\n\t};\n\n\tstate = {\n\t\tsearch: '',\n\t\tmonsters: [],\n\t};\n\n\tcomponentWillMount() {\n\t\timport(/* webpackChunkName: \"monsters\" */ '../../api/srd-monsters.json').then(\n\t\t\t(module) => {\n\t\t\t\tthis.setState({ monsters: module.default });\n\t\t\t},\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { search } = this.state;\n\t\tconst {\n\t\t\tmonsters: { encounters, selectedEncounter },\n\t\t} = this.props;\n\n\t\tconst hasSelectedEncounter = findIndex(encounters, ['id', selectedEncounter]) !== -1;\n\t\tconst actions = [{\n\t\t\tkey: 'quickAdd',\n\t\t\tonClick: this.quickAddMonsterToInitiative,\n\t\t\ttitle: 'Add to initiative',\n\t\t\tglyph: IconLightning,\n\t\t}];\n\n\n\n\t\tif (hasSelectedEncounter) {\n\t\t\tactions.push({\n\t\t\t\tkey: 'addToEncounter',\n\t\t\t\tonClick: this.addMonsterToEncounter,\n\t\t\t\ttitle: 'Add to encounter',\n\t\t\t\tglyph: IconAdd,\n\t\t\t});\n\t\t}\n\n\n\t\treturn (\n\t\t\t<SidebarLayout>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"monstersearch\"\n\t\t\t\t\t\t\tname=\"monstersearch\"\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tplaceholder=\"Search for monsters...\"\n\t\t\t\t\t\t\tvalue={search}\n\t\t\t\t\t\t\tonInput={this.onInput}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\tlistName=\"monsters\"\n\t\t\t\t\t\titems={this.filterMonsters()}\n\t\t\t\t\t\tonSortEnd={() => {}}\n\t\t\t\t\t\tcolorNames\n\t\t\t\t\t\tactions={actions}\n\t\t\t\t\t\tdisableDragging\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<MonsterEncounters />\n\t\t\t\t</Fragment>\n\t\t\t</SidebarLayout>\n\t\t);\n\t}\n\n\tfilterMonsters = () => {\n\t\tconst { search, monsters } = this.state;\n\t\tconst { monsters: { customMonsters } } = this.props;\n\n\t\tconsole.log(customMonsters);\n\n\t\tlet filteredMonsters = [...monsters, ...customMonsters];\n\t\tif (search) {\n\t\t\tfilteredMonsters = filter(filteredMonsters, (monster) => {\n\t\t\t\treturn monster.name.toLowerCase().indexOf(search.toLowerCase()) !== -1;\n\t\t\t});\n\t\t}\n\n\t\treturn filteredMonsters;\n\t};\n\n\tonInput = (e) => {\n\t\tthis.setState({\n\t\t\tsearch: e.target.value,\n\t\t});\n\t};\n\n\tcreateMonsterAddPlayerAction = (monsterData) => ({\n\t\ttype: PLAYERS_ADD,\n\t\tplayers: [\n\t\t\t{\n\t\t\t\tname: monsterData.name,\n\t\t\t\tstats: monsterData,\n\t\t\t},\n\t\t],\n\t});\n\n\taddMonsterToEncounter = (monster) => {\n\t\tconst {\n\t\t\tdispatch,\n\t\t\tmonsters: { selectedEncounter },\n\t\t} = this.props;\n\n\t\tif (selectedEncounter && monster && monster.id) {\n\t\t\tdispatch({\n\t\t\t\ttype: MONSTERS_ADD,\n\t\t\t\tencounterId: selectedEncounter,\n\t\t\t\tmonster,\n\t\t\t});\n\t\t\t// dispatch(this.createMonsterAddPlayerAction(monster));\n\t\t}\n\t};\n\n\tquickAddMonsterToInitiative = (monster) => {\n\t\tconsole.log(monster);\n\t\tconst {\n\t\t\tdispatch,\n\t\t} = this.props;\n\n\t\tdispatch({\n\t\t\ttype: ADD_ACTOR,\n\t\t\tactor: enhanceMonster(monster),\n\t\t})\n\t};\n}\n\nexport default connect((state) => state)(MonsterLookup);\n","import React, { Component } from 'react';\n\nclass EncounterGenerator extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"encountergenerator\">\n\t\t\t\tEncounterGenerator\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default EncounterGenerator;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\n// import { Switch, Route } from 'react-router';\n// import { push } from 'connected-react-router';\nimport { connect } from 'react-redux';\n// import { Link } from 'react-router-dom';\nimport forEach from 'lodash/forEach';\nimport {\n\t// PLAYERS_ADD,\n\tPLAYERS_MOVE,\n\tTYPE_PLAYER,\n} from '../../reducers/players';\nimport SortableList from '../../components/list';\nimport SidebarLayout from '../../components/sidebarLayout';\nimport SidebarActions from '../../components/sidebarActions';\n\nimport IconSwordman from './swordman.svg';\nimport IconRemove from '../../svg/remove.svg';\nimport './party.scss';\nimport { ADD_ACTOR, REMOVE_ACTOR } from '../../actions';\n\nclass PartyManager extends Component {\n\tstatic propTypes = {\n\t\tdispatch: PropTypes.func.isRequired,\n\t\tplayers: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n\t};\n\n\trender() {\n\t\tconst { players } = this.props;\n\t\treturn (\n\t\t\t<SidebarLayout>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<SidebarActions\n\t\t\t\t\t\tbuttons={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'addplayer',\n\t\t\t\t\t\t\t\tonClick: this.addPlayers,\n\t\t\t\t\t\t\t\tglyph: IconSwordman,\n\t\t\t\t\t\t\t\ttitle: 'Add players',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t\t<SortableList\n\t\t\t\t\t\titems={players}\n\t\t\t\t\t\tonSortEnd={this.onSortEnd}\n\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'remove',\n\t\t\t\t\t\t\t\tonClick: this.removePlayer,\n\t\t\t\t\t\t\t\tglyph: IconRemove,\n\t\t\t\t\t\t\t\ttitle: 'Remove player',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<div />\n\t\t\t\t</Fragment>\n\t\t\t</SidebarLayout>\n\t\t);\n\t}\n\n\tonSortEnd = ({ oldIndex, newIndex }) => {\n\t\tconst { dispatch } = this.props;\n\n\t\tif (oldIndex !== newIndex) {\n\t\t\tdispatch({\n\t\t\t\ttype: PLAYERS_MOVE,\n\t\t\t\toldIndex,\n\t\t\t\tnewIndex,\n\t\t\t});\n\t\t}\n\t};\n\n\taddPlayers = () => {\n\t\tconst { dispatch } = this.props;\n\t\t// eslint-disable-next-line no-alert\n\t\tconst namesStr = window.prompt(\n\t\t\t'Enter player names, separate multiple names with comma.',\n\t\t);\n\t\tif (namesStr) {\n\t\t\tconst playerNames = namesStr\n\t\t\t\t.split(',')\n\t\t\t\t.map((name) => this.createPlayerObject(name.trim()));\n\n\t\t\tif (playerNames.length) {\n\t\t\t\tforEach(playerNames, (player) => {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: ADD_ACTOR,\n\t\t\t\t\t\tactor: player,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tremovePlayer = (item) => {\n\t\tconst { dispatch } = this.props;\n\n\t\tif (\n\t\t\titem\n\t\t\t&& window.confirm(` Are you sure you want to remove \"${item.name}\"?`)\n\t\t) {\n\t\t\tdispatch({\n\t\t\t\ttype: REMOVE_ACTOR,\n\t\t\t\tactor: item,\n\t\t\t});\n\t\t}\n\t};\n\n\tcreatePlayerObject = (name) => ({\n\t\tname,\n\t\ttype: TYPE_PLAYER,\n\t});\n}\n\nexport default connect((state) => ({\n\tplayers: state.players.items,\n}))(PartyManager);\n","import React from 'react';\n// import classnames from 'classnames';\nimport { Switch, Route, Redirect } from 'react-router';\nimport { HashRouter, Link } from 'react-router-dom';\nimport InitiativeTracker from '../initiative';\nimport MonsterLookup from '../monsters';\nimport EncounterGenerator from '../encounter';\nimport PartyManager from '../party';\n\nimport IconInitiative from './initiative.svg';\nimport IconMonster from './monster.svg';\nimport IconClash from './sword-clash.svg';\nimport IconParty from './party.svg';\n\nimport './app.scss';\n\nconst App = () => (\n\t<HashRouter>\n\t\t<div className=\"layout\">\n\t\t\t<aside className=\"navigation\">\n\t\t\t\t<ol>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/initiative\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={IconInitiative}\n\t\t\t\t\t\t\t\talt=\"Initiative Tracker\"\n\t\t\t\t\t\t\t\tclassName=\"navigation__icon\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/party\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={IconParty}\n\t\t\t\t\t\t\t\talt=\"Party Editor\"\n\t\t\t\t\t\t\t\tclassName=\"navigation__icon\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/encounters\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={IconMonster}\n\t\t\t\t\t\t\t\talt=\"Monster Lookup\"\n\t\t\t\t\t\t\t\tclassName=\"navigation__icon\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/encountergenerator\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={IconClash}\n\t\t\t\t\t\t\t\talt=\"Encounter Generator\"\n\t\t\t\t\t\t\t\tclassName=\"navigation__icon\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t</ol>\n\t\t\t</aside>\n\n\t\t\t<div className=\"layout-content\">\n\t\t\t\t<div className=\"layout-content__content\">\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Redirect from=\"/\" to=\"/initiative\" exact />\n\t\t\t\t\t\t<Route path=\"/initiative\" component={InitiativeTracker} />\n\t\t\t\t\t\t<Route path=\"/party\" component={PartyManager} />\n\t\t\t\t\t\t<Route path=\"/encounters\" component={MonsterLookup} />\n\t\t\t\t\t\t<Route path=\"/encountergenerator\" component={EncounterGenerator} />\n\t\t\t\t\t\t{/* <Route component={NoMatch}/> */}\n\t\t\t\t\t</Switch>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</HashRouter>\n);\n\nexport default App;\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ConnectedRouter } from 'connected-react-router';\nimport store, { history } from './store';\nimport App from './containers/app';\n\nconst target = document.querySelector('#root');\n\nrender(\n\t<Provider store={store}>\n\t\t<ConnectedRouter history={history}>\n\t\t\t<div>\n\t\t\t\t<App />\n\t\t\t</div>\n\t\t</ConnectedRouter>\n\t</Provider>,\n\ttarget,\n);\n"],"sourceRoot":""}